/*! tabella - v0.0.1 - 2014-12-18
* https://github.com/iliketomatoes/tabellajs
* Copyright (c) 2014 ; Licensed  */
!function(a){"use strict";"function"==typeof define&&define.amd?define(a):window.Tabella=a()}(function(){"use strict";function a(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a}function b(a){this.value=a,this.message="Tabella.js error: ",this.toString=function(){return this.message+this.value}}function c(c,d){function e(a,b,c,d){var e=a.periods;if(e instanceof Array&&e.length){var f=e.length,g=document.createElement("div");g.className="period-row",g.style.width=d+"px",b.appendChild(g);for(var h=0;f>h;h++){var i=document.createElement("div");i.className="period-cell",i.style.width=c+"px";var j=document.createElement("div");j.className="period-element";var k='<div class="period-fromto">';k+=a.from,"undefined"!=typeof e[h][1]&&(k+="<br>",k+=a.to),k+="</div>",k+='<div class="period-date">',k+="undefined"!=typeof e[h][0]?e[h][0]:"not set","undefined"!=typeof e[h][1]&&(k+="<br>",k+=e[h][1]),k+="</div>",j.innerHTML=k,i.appendChild(j),g.appendChild(i)}return g}return!1}function f(a,b,c,d){var e=a.periods,f=a.rows,g=e.length,h=f.length;if(h>0){for(var i=!0,j=0;h>j;j++){var k=document.createElement("div");k.className="item-row",k.style.width=d+"px",b.appendChild(k);for(var l in f[j])if("string"==typeof f[j][l]){var m=document.createElement("section");m.className="item-desc",m.innerHTML=f[j][l],k.appendChild(m)}else{if("object"!=typeof f[j][l]||f[j][l].length!==g){i=!1;break}for(var n=0;n<f[j][l].length;n++){var o=document.createElement("div");o.className="item-cell",o.style.width=c+"px",o.innerHTML=f[j][l][n],k.appendChild(o)}}}return i}return!1}if(this.defaults={periods:null,rows:null,breakpoints:{small:[300,2],medium:[540,3],large:[720,4],xlarge:[1080,5]},from:"from",to:"to",borderWidth:1},this.periodRow=null,this.currentBreakpoint=[0,1],this.cellWidth=0,this.el=c,"undefined"==typeof c)throw new b("You did not pass a valid target element to the constructor");if("undefined"==typeof d)throw new b("You did not pass any options to the constructor");if(this.options=a(this.defaults,d),this.getBreakpoint=function(){var a=this,b=0,c=a.el.clientWidth,d=a.options.breakpoints;for(var e in d){var f=d[e][0];"number"==typeof f&&f>0&&c>=f&&Math.abs(c-f)<Math.abs(c-b)&&(b=f,a.currentBreakpoint=d[e])}return a.currentBreakpoint},this.getCellWidth=function(){var a,b,c=this,d=c.options.periods.length;return a=c.getBreakpoint(),b=a[1]>d?c.getElAdjustedWidth()/d:c.getElAdjustedWidth()/a[1],Math.floor(b)},this.getElAdjustedWidth=function(){return this.el.clientWidth-2*this.options.borderWidth},null===this.options.periods||null===this.options.rows)throw new b("Periods or rows are null");if(this.cellWidth=this.getCellWidth(),this.periodRow=e(this.options,this.el,this.cellWidth,this.getElAdjustedWidth()),!this.periodRow)throw new b("Periods is not an Array");if(!f(this.options,this.el,this.cellWidth,this.getElAdjustedWidth()))throw new b("There is a mismatch between periods and prices cells");this.attachEvents()}return c});