/*! tabella - v0.0.1 - 2014-12-21
* https://github.com/iliketomatoes/tabellajs
* Copyright (c) 2014 ; Licensed  */
!function(a){"use strict";"function"==typeof define&&define.amd?define(a):window.Tabella=a()}(function(){"use strict";function a(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a}function b(a,b,c,d){var e=document.createElement(a);return e.className=b,d&&(e.innerHTML=d),c.appendChild(e),e}function c(a){this.value=a,this.message="Tabella.js error: ",this.toString=function(){return this.message+this.value}}function d(d,e){function f(a,c,d){var e=a.periods,f=document.createDocumentFragment();if(e instanceof Array&&e.length){var g=e.length,h=b("div","t-row",f),i=b("div","t-row-content",h);i.style.width=d*(g+1)+"px";var j='<div class="t-element">';j+='<div class="t-cell-desc-l">',j+=a.from,j+="<br>",j+=a.to,j+="</div>",j+="</div>";var k=b("div","t-row-desc",i,j);k.style.width=d+"px";var l=b("div","t-row-values",i);l.style.width=d*g+"px";for(var m=0;g>m;m++){var n=document.createElement("div");n.className="t-row-cell",n.style.width=d+"px";var o='<div class="t-cell-desc-s">';o+=a.from,"undefined"!=typeof e[m][1]&&(o+="<br>",o+=a.to),o+="</div>",o+='<div class="t-cell-value">',o+="undefined"!=typeof e[m][0]?e[m][0]:"not set","undefined"!=typeof e[m][1]&&(o+="<br>",o+=e[m][1]),o+="</div>";{b("div","t-element",n,o)}l.appendChild(n)}return c.appendChild(f),h}return!1}function g(a,c,d){var e=a.periods,f=a.rows,g=e.length,h=f.length,i=document.createDocumentFragment();if(h>0){for(var j=!0,k=0;h>k&&j;k++){var l=b("div","t-row",i);if(f[k].desc){b("section","t-row-header",l,f[k].desc)}if(f[k].prices){var m=b("div","t-row-content",l);m.style.width=d*(g+1)+"px";for(var n=0;n<f[k].prices.length&&j;n++){var o='<div class="t-element">';o+='<div class="t-cell-desc-l">',o+=f[k].pricesDesc[n],o+="</div>",o+="</div>";var p=b("div","t-row-desc",m,o);p.style.width=d+"px";var q=b("div","t-row-values",m);q.style.width=d*g+"px";for(var r=0;r<f[k].prices[n].length;r++){if(f[k].prices[n].length!==g){j=!1;break}var s=document.createElement("div"),t="t-row-cell";n>=1&&(t+=" cell-border-top"),s.className=t,s.style.width=d+"px";var u="";f[k].pricesDesc[n]&&(u+='<div class="t-cell-desc-s">',f[k].pricesDesc[n][r]?u+=f[k].pricesDesc[n][r]:f[k].pricesDesc[n][0]&&(u+=f[k].pricesDesc[n][0]),u+="</div>"),u+='<div class="t-cell-value">',u+="undefined"!=typeof f[k].prices[n][r]?f[k].prices[n][r]:"not set",u+=" "+a.currency,u+="</div>";{b("div","t-element",s,u)}q.appendChild(s)}}}}return c.appendChild(i),j}return!1}function h(){}if(this.defaults={periods:null,rows:null,breakpoints:{small:[360,2],medium:[640,3],large:[820,4],xlarge:[1080,5]},from:"from",to:"to",borderWidth:1,currency:"&euro;"},this.periodRow=null,this.currentBreakpoint=[0,1],this.cellWidth=0,this.el=d,"undefined"==typeof d)throw new c("You did not pass a valid target element to the constructor");if("undefined"==typeof e)throw new c("You did not pass any options to the constructor");if(this.options=a(this.defaults,e),this.getBreakpoint=function(){var a=this,b=0,c=a.el.clientWidth,d=a.options.breakpoints;for(var e in d){var f=d[e][0];"number"==typeof f&&f>0&&c>=f&&Math.abs(c-f)<Math.abs(c-b)&&(b=f,a.currentBreakpoint=d[e])}return a.currentBreakpoint},this.getCellWidth=function(){var a,b,c=this,d=c.options.periods.length;return a=c.getBreakpoint(),console.log(c.el.parentNode.clientWidth),b=a[1]>d?c.el.clientWidth/numberOfPeriods:c.el.clientWidth/a[1],console.log(b),console.log(c.el.clientWidth),Math.round(b)},null===this.options.periods||null===this.options.rows)throw new c("Periods or rows are null");if(this.cellWidth=this.getCellWidth(),this.periodRow=f(this.options,this.el,this.cellWidth,this.el.clientWidth),!this.periodRow)throw new c("Periods is not an Array");if(!g(this.options,this.el,this.cellWidth,this.el.clientWidth))throw new c("There is a mismatch between periods and prices cells");h(this.options,this.el,this.periodRow);var i=this;window.onload=function(){i.refreshSize()}}return d.prototype.refreshSize=function(){var a=this;console.log(a),console.log(a.periodRow)},d});