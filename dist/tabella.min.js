/*! tabella - v0.0.1 - 2014-12-18
* https://github.com/iliketomatoes/tabellajs
* Copyright (c) 2014 ; Licensed  */
!function(a){"use strict";"function"==typeof define&&define.amd?define(a):window.Tabella=a()}(function(){"use strict";function a(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a}function b(a){this.value=a,this.message="Tabella.js error: ",this.toString=function(){return this.message+this.value}}function c(c,d){function e(a,b,c){var d=a.periods;if(d instanceof Array&&d.length){var e=d.length,f=document.createElement("div");f.className="period-wrapper",b.appendChild(f);var g=document.createElement("div");g.className="period-row",g.style.width=c*e+"px",f.appendChild(g);for(var h=0;e>h;h++){var i=document.createElement("div");i.className="period-cell",i.style.width=c+"px";var j=document.createElement("div");j.className="period-element";var k='<div class="period-fromto">';k+=a.from,"undefined"!=typeof d[h][1]&&(k+="<br>",k+=a.to),k+="</div>",k+='<div class="period-date">',k+="undefined"!=typeof d[h][0]?d[h][0]:"not set","undefined"!=typeof d[h][1]&&(k+="<br>",k+=d[h][1]),k+="</div>",j.innerHTML=k,i.appendChild(j),g.appendChild(i)}return g}return!1}function f(a,b,c){var d=a.periods,e=a.rows,f=d.length,g=e.length;if(g>0){for(var h=!0,i=0;g>i;i++){var j=document.createElement("div");j.className="item-wrapper",b.appendChild(j);var k=document.createElement("div");k.className="item-row",k.style.width=c*f+"px",j.appendChild(k);for(var l in e[i])if("string"==typeof e[i][l]){var m=document.createElement("section");m.className="item-desc",m.innerHTML=e[i][l],k.appendChild(m)}else{if("object"!=typeof e[i][l]||e[i][l].length!==f){h=!1;break}for(var n=0;n<e[i][l].length;n++){var o=document.createElement("div");o.className="item-cell",o.style.width=c+"px",o.innerHTML=e[i][l][n],k.appendChild(o)}}}return h}return!1}function g(){}if(this.defaults={periods:null,rows:null,breakpoints:{small:[300,2],medium:[540,3],large:[720,4],xlarge:[1080,5]},from:"from",to:"to",borderWidth:1},this.periodRow=null,this.currentBreakpoint=[0,1],this.cellWidth=0,this.el=c,"undefined"==typeof c)throw new b("You did not pass a valid target element to the constructor");if("undefined"==typeof d)throw new b("You did not pass any options to the constructor");if(this.options=a(this.defaults,d),this.getBreakpoint=function(){var a=this,b=0,c=a.el.clientWidth,d=a.options.breakpoints;for(var e in d){var f=d[e][0];"number"==typeof f&&f>0&&c>=f&&Math.abs(c-f)<Math.abs(c-b)&&(b=f,a.currentBreakpoint=d[e])}return a.currentBreakpoint},this.getCellWidth=function(){var a,b,c=this,d=c.options.periods.length;return a=c.getBreakpoint(),a[1]>d?b=this.el.clientWidth/d:(b=this.el.clientWidth/a[1],console.log(this.el.clientWidth)),console.log(b),Math.round(b)},null===this.options.periods||null===this.options.rows)throw new b("Periods or rows are null");if(this.cellWidth=this.getCellWidth(),this.periodRow=e(this.options,this.el,this.cellWidth,this.el.clientWidth),!this.periodRow)throw new b("Periods is not an Array");if(!f(this.options,this.el,this.cellWidth,this.el.clientWidth))throw new b("There is a mismatch between periods and prices cells");g(this.options,this.el,this.periodRow)}return c});