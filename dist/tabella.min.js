/*! tabella - v0.0.1 - 2014-12-17
* https://github.com/iliketomatoes/tabellajs
* Copyright (c) 2014 ; Licensed  */
!function(a){"use strict";"function"==typeof define&&define.amd?define(a):window.Tabella=a()}(function(){"use strict";function a(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a}function b(a){this.value=a,this.message="Tabella.js error: ",this.toString=function(){return this.message+this.value}}function c(c,d){function e(a,b,c){var d=a.periods;if(d instanceof Array&&d.length){var e=d.length,f=document.createElement("div");f.className="period-row",f.style.width=c*d.length+"px",b.appendChild(f);for(var g=0;e>g;g++){var h=document.createElement("div");h.className="period-cell",h.style.width=c+"px";var i=document.createElement("div");i.className="period-element";var j='<div class="period-fromto">';j+=a.from,"undefined"!=typeof d[g][1]&&(j+="<br>",j+=a.to),j+="</div>",j+='<div class="period-date">',j+="undefined"!=typeof d[g][0]?d[g][0]:"not set","undefined"!=typeof d[g][1]&&(j+="<br>",j+=d[g][1]),j+="</div>",i.innerHTML=j,h.appendChild(i),f.appendChild(h)}return!0}return!1}function f(a,b){var c=a.periods,d=(c.length,b.length);if(d>0){for(var e=0;d>e;e++)for(var f in b[e]);return!0}return!1}this.defaults={periods:null,rows:null,breakpoints:{small:[300,2],medium:[540,3],large:[720,4],xlarge:[1080,5]},from:"from",to:"to"},this.periods=null,this.rows=null,this.currentBreakpoint=[0,1],this.cellWidth=0,this.el=c;try{if("undefined"==typeof c)throw new b("You did not pass a valid target element to the constructor");if("undefined"==typeof d)throw new b("You did not pass any options to the constructor");this.options=a(this.defaults,d)}catch(g){return console.error(g.toString()),g}this.getBreakpoint=function(){var a=this,b=0,c=a.el.clientWidth,d=a.options.breakpoints;for(var e in d){var f=d[e][0];"number"==typeof f&&f>0&&c>=f&&Math.abs(c-f)<Math.abs(c-b)&&(b=f,a.currentBreakpoint=d[e])}return a.currentBreakpoint},this.getCellWidth=function(){var a,b,c=this,d=c.options.periods.length;return a=c.getBreakpoint(),b=a[1]>d?c.el.clientWidth/d:c.el.clientWidth/a[1],console.log(b),Math.round(b)};try{if(null===this.options.periods||null===this.options.rows)throw new b("Periods or rows are null");if(this.cellWidth=this.getCellWidth(),this.periods=e(this.options,this.el,this.cellWidth),!this.periods)throw new b("Periods is not an Array");if(this.rows=f(this.options,this.options.rows,this.cellWidth),!this.rows)throw new b("There is a mismatch between periods and prices cells")}catch(g){return console.error(g.toString()),g}}return c});